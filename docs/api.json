{"openapi":"3.0.1","info":{"title":"Notify Service","description":"Service for contacting respondents via Gov Notify SMS messages","version":"v1"},"servers":[{"url":"http://localhost:8162","variables":{}}],"paths":{"/sms-fulfilment":{"post":{"tags":["sms-fulfilment-endpoint"],"description":"SMS Fulfilment Request","operationId":"smsFulfilment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestDTO"}}},"required":true},"responses":{"200":{"description":"Send an SMS fulfilment for a case. Returns uacHash & QID if template has UAC/QID, or empty response if not","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SmsFulfilmentResponseSuccess"}}}},"400":{"description":"SMS Fulfilment request failed validation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SmsFulfilmentResponseError"}}}},"500":{"description":"Error with Gov Notify when attempting to send SMS"}}}}},"components":{"schemas":{"RequestDTO":{"type":"object","properties":{"header":{"$ref":"#/components/schemas/RequestHeaderDTO"},"payload":{"$ref":"#/components/schemas/RequestPayloadDTO"}}},"RequestHeaderDTO":{"type":"object","properties":{"source":{"type":"string","description":"The microservice that is calling the API","example":"Survey Enquiry Line API"},"channel":{"type":"string","description":"The product that is calling the API","example":"RH"},"correlationId":{"type":"string","description":"The ID that connects all the way from the public web load balancer to the backend, and back again","format":"uuid"},"originatingUser":{"type":"string","description":"The ONS user who is triggering this API request via an internal UI","example":"fred.bloggs@ons.gov.uk"}}},"RequestPayloadDTO":{"type":"object","properties":{"smsFulfilment":{"$ref":"#/components/schemas/SmsFulfilment"}}},"SmsFulfilment":{"type":"object","properties":{"caseId":{"type":"string","description":"The case, which must exist in RM","format":"uuid"},"phoneNumber":{"type":"string","description":"The phone number, which must be a UK number consisting of 9 digits, preceded by a `7` and optionally a UK country code or zero (`0`, `044` or `+44`).","example":"+447123456789"},"packCode":{"type":"string","description":"The pack code, which must exist in RM and the pack code must be allowed on the survey the case belongs to"}}},"SmsFulfilmentResponseSuccess":{"type":"object","properties":{"uacHash":{"type":"string"},"qid":{"type":"string"}}},"SmsFulfilmentResponseError":{"type":"object","properties":{"error":{"type":"string"}}}}}}